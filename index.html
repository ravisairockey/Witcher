<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="Rsv Rockey" />
  <title>The Witcher Universe Timeline</title>

  <!-- Bootstrap CSS for base styling -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Animate On Scroll CSS -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />

  <!-- Particles.js -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>

  <!-- Anime.js for animations (optional) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

  <style>
    /* ========== CSS Variables for Dark and Light Themes ========== */
    :root {
      /* Dark mode colors */
      --bg-dark: #0b0f1a;
      --text-dark: #f5f5f5;
      --primary-dark: #f5b041;
      --glass-bg-dark: rgba(255, 255, 255, 0.07);
      --glass-shadow-dark: rgba(31, 38, 135, 0.3);
      --table-header-bg-dark: rgba(31, 42, 68, 0.9);
      --table-row-hover-dark: rgba(255, 255, 255, 0.03);
      --border-dark: #222;

      /* Light mode colors */
      --bg-light: #e6eaf0;
      --text-light: #222222;
      --primary-light: #d9822b;
      --glass-bg-light: rgba(255, 255, 255, 0.3);
      --glass-shadow-light: rgba(0, 0, 0, 0.1);
      --table-header-bg-light: rgba(200, 200, 200, 0.9);
      --table-row-hover-light: rgba(0, 0, 0, 0.04);
      --border-light: #ccc;
    }

    /* ========== Base Styles and Layout ========== */
    body {
      margin: 0;
      padding: 1rem;
      background: var(--bg-dark);
      color: var(--text-dark);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      transition: background-color 0.4s ease, color 0.4s ease;
    }

    /* Light mode overrides */
    body.light-mode {
      background: var(--bg-light);
      color: var(--text-light);
    }

    /* ========== Glass Morph Containers (header, main container, footer) ========== */
    header,
    .container.glass-box,
    footer {
      max-width: 1000px;
      width: 100%;
      background: var(--glass-bg-dark);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-radius: 1rem;
      padding: 2rem 3rem;
      box-shadow: 0 8px 32px var(--glass-shadow-dark);
      margin-bottom: 2rem;
      transition: background 0.4s ease, box-shadow 0.4s ease;
    }
    body.light-mode header,
    body.light-mode .container.glass-box,
    body.light-mode footer {
      background: var(--glass-bg-light);
      box-shadow: 0 8px 32px var(--glass-shadow-light);
    }

    /* ========== Header Styling ========== */
    header {
      text-align: center;
    }
    header h1 {
      font-size: 3.8rem;
      font-weight: 800;
      letter-spacing: 1px;
      color: var(--primary-dark);
      text-shadow: 0 0 12px #00000077;
      margin-bottom: 0.2rem;
      transition: color 0.4s ease;
    }
    body.light-mode header h1 {
      color: var(--primary-light);
      text-shadow: none;
    }
    header p.lead {
      font-size: 1.3rem;
      font-style: italic;
      color: #d3d3d3;
      margin-top: 0;
      transition: color 0.4s ease;
    }
    body.light-mode header p.lead {
      color: #555;
    }

    /* ========== Dark / Light Mode Toggle Button ========== */
    #mode-toggle {
      cursor: pointer;
      background: transparent;
      border: 2px solid var(--primary-dark);
      color: var(--primary-dark);
      font-weight: 700;
      padding: 0.4rem 1.2rem;
      border-radius: 9999px;
      transition: all 0.3s ease;
      user-select: none;
      margin-top: 1rem;
      font-size: 1rem;
      display: inline-block;
    }
    #mode-toggle:hover {
      background: var(--primary-dark);
      color: #111;
    }
    body.light-mode #mode-toggle {
      border-color: var(--primary-light);
      color: var(--primary-light);
    }
    body.light-mode #mode-toggle:hover {
      background: var(--primary-light);
      color: #fff;
    }

    /* ========== Timeline Graph Container ========== */
    #timeline-graph {
      width: 100%;
      height: 150px;
      margin-bottom: 2rem;
      user-select: none;
    }

    /* ========== Table Responsive Scroll Container ========== */
    .table-responsive {
      overflow-x: auto;
      scrollbar-width: thin;
      scrollbar-color: var(--primary-dark) transparent;
      outline: none;
    }
    .table-responsive::-webkit-scrollbar {
      height: 8px;
    }
    .table-responsive::-webkit-scrollbar-track {
      background: transparent;
    }
    .table-responsive::-webkit-scrollbar-thumb {
      background-color: var(--primary-dark);
      border-radius: 10px;
    }
    body.light-mode .table-responsive::-webkit-scrollbar-thumb {
      background-color: var(--primary-light);
    }

    /* ========== Table Styles ========== */
    table {
      min-width: 700px;
      border-collapse: separate;
      border-spacing: 0;
      border-radius: 1rem;
      overflow: hidden;
      transition: color 0.4s ease;
    }
    thead th {
      background-color: var(--table-header-bg-dark);
      color: #fff;
      font-size: 1.1rem;
      padding: 1rem 1.5rem;
      text-align: left;
      white-space: nowrap;
      transition: background-color 0.4s ease, color 0.4s ease;
    }
    body.light-mode thead th {
      background-color: var(--table-header-bg-light);
      color: var(--text-light);
    }
    tbody tr {
      border-bottom: 1px solid var(--border-dark);
      transition: background 0.3s ease, transform 0.2s ease;
      cursor: default;
    }
    body.light-mode tbody tr {
      border-bottom: 1px solid var(--border-light);
    }
    tbody tr:hover {
      background: var(--table-row-hover-dark);
      transform: scale(1.01);
    }
    body.light-mode tbody tr:hover {
      background: var(--table-row-hover-light);
    }
    td {
      padding: 1rem 1.5rem;
      vertical-align: top;
      white-space: normal;
    }

    /* ========== Footer Styles ========== */
    footer {
      text-align: center;
      color: var(--text-dark);
      font-size: 0.95rem;
      border-top: 1px solid var(--border-dark);
      margin-top: auto;
      transition: color 0.4s ease, border-color 0.4s ease, background 0.4s ease;
      background: var(--glass-bg-dark);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 1rem;
      padding: 1rem 2rem;
    }
    body.light-mode footer {
      background: var(--glass-bg-light);
      color: var(--text-light);
      border-color: var(--border-light);
    }

    /* ========== Responsive Typography ========== */
    @media (max-width: 768px) {
      header h1 {
        font-size: 2.6rem;
      }
      header p.lead {
        font-size: 1.1rem;
      }
      table {
        min-width: 600px;
      }
    }
    @media (max-width: 480px) {
      header h1 {
        font-size: 2rem;
      }
      table {
        min-width: 500px;
      }
    }
  </style>
</head>
<body>
  <!-- Particles.js background container -->
  <div id="particles-js"></div>

  <!-- Page Header -->
  <header data-aos="fade-down" aria-label="Page header">
    <h1>The Witcher Universe Timeline</h1>
    <p class="lead">Books + Netflix Series + Games</p>

    <!-- Dark/Light Mode Toggle Button -->
    <button
      id="mode-toggle"
      aria-pressed="false"
      aria-label="Toggle dark and light mode"
      type="button"
    >
      Switch to Light Mode
    </button>
  </header>

  <!-- Interactive Timeline Graph (Canvas) -->
  <div id="timeline-graph" aria-hidden="true"></div>

  <!-- Main Content Container with Glass Morph -->
  <main class="container glass-box" data-aos="fade-up" role="main">
    <div
      class="table-responsive"
      tabindex="0"
      aria-label="Witcher Universe timeline table"
    >
      <table class="table table-dark table-striped timeline-table">
        <thead>
          <tr>
            <th scope="col">Timeline Year (Approx.)</th>
            <th scope="col">Medium</th>
            <th scope="col">Event Summary</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Ancient Times</td>
            <td>Lore</td>
            <td>
              - Elder Blood is passed through Lara Dorren.<br />
              - The Conjunction of the Spheres merges monsters, magic, and humans
              into one world.
            </td>
          </tr>
          <tr>
            <td>~1230s</td>
            <td>üéÆ Netflix S1 (Yen's arc)</td>
            <td>
              - Yennefer is born, transformed at Aretuza.<br />
              - Becomes a powerful sorceress after decades of manipulation and
              pain.
            </td>
          </tr>
          <tr>
            <td>~1240s‚Äì1250s</td>
            <td>üéÆ Netflix S1‚Äì2, üìô The Last Wish / Sword of Destiny</td>
            <td>
              - Geralt hunts monsters.<br />
              - Destiny links him to Ciri via the Law of Surprise.<br />
              - Geralt meets Yennefer.<br />
              - Nilfgaard invades Cintra, Ciri flees.
            </td>
          </tr>
          <tr>
            <td>~1263</td>
            <td>üéÆ Netflix S3, üìô Time of Contempt</td>
            <td>
              - Ciri is trained at Kaer Morhen.<br />
              - Coup at Aretuza, mages scatter.<br />
              - Ciri opens a portal, ends up in the desert.<br />
              - Wild Hunt teased.
            </td>
          </tr>
          <tr>
            <td>~1264‚Äì1268</td>
            <td>üìô Baptism of Fire ‚Üí Lady of the Lake</td>
            <td>
              - Geralt forms a company to find Ciri.<br />
              - Ciri becomes a bandit (‚ÄúFalka‚Äù), then lands in another world.<br />
              - Books end with Geralt and Yennefer possibly dying in Rivia pogrom,
              Ciri vanishes into other realms.
            </td>
          </tr>
          <tr>
            <td>~1270</td>
            <td>üéÆ The Witcher 1</td>
            <td>
              - Geralt is resurrected with amnesia.<br />
              - Kaer Morhen attacked by Salamandra.<br />
              - Geralt kills their leader and saves King Foltest.
            </td>
          </tr>
          <tr>
            <td>1271</td>
            <td>üéÆ The Witcher 2: Assassins of Kings</td>
            <td>
              - Foltest is assassinated; Geralt is framed.<br />
              - He hunts Letho, another Witcher.<br />
              - North is destabilized.<br />
              - Geralt starts regaining memories.
            </td>
          </tr>
          <tr>
            <td>1272</td>
            <td>üéÆ The Witcher 3: Wild Hunt</td>
            <td>
              - Geralt searches for Ciri, who is hunted by the Wild Hunt.<br />
              - Travels across Velen, Novigrad, Skellige.<br />
              - Ciri returns, confronts the Wild Hunt.<br />
              - Depending on choices, Ciri becomes Witcher, Empress, or disappears.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

  <!-- Footer -->
  <footer data-aos="fade-up" role="contentinfo">
    <p>
      &copy; 2025 Rsv Rockey. All rights reserved.<br />
      Designed and authored by <strong>Rsv Rockey</strong>. Unauthorized
      reproduction or distribution is prohibited.<br />
      Last updated: July 2025
    </p>
  </footer>

  <!-- Bootstrap Bundle JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- AOS JS for scroll animations -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

  <script>
    // Initialize Animate On Scroll (AOS)
    AOS.init();

    // Initialize Particles.js with subtle particles
    particlesJS("particles-js", {
      particles: {
        number: { value: 100 },
        color: { value: "#f5b041" },
        shape: { type: "circle" },
        opacity: { value: 0.3 },
        size: { value: 3 },
        line_linked: { enable: true, color: "#ffffff" },
        move: { speed: 1 }
      }
    });

    // Dark / Light mode toggle logic
    const toggleBtn = document.getElementById("mode-toggle");
    const body = document.body;

    // Function to set mode and update UI accordingly
    function setMode(isLight) {
      if (isLight) {
        body.classList.add("light-mode");
        toggleBtn.textContent = "Switch to Dark Mode";
        toggleBtn.setAttribute("aria-pressed", "true");
      } else {
        body.classList.remove("light-mode");
        toggleBtn.textContent = "Switch to Light Mode";
        toggleBtn.setAttribute("aria-pressed", "false");
      }
    }

    // Load saved mode preference from localStorage
    const savedMode = localStorage.getItem("witcher-mode");
    if (savedMode === "light") {
      setMode(true);
    } else {
      setMode(false);
    }

    // Toggle mode on button click and save preference
    toggleBtn.addEventListener("click", () => {
      const isLight = body.classList.toggle("light-mode");
      setMode(isLight);
      localStorage.setItem("witcher-mode", isLight ? "light" : "dark");

      // Redraw timeline graph in correct mode colors
      drawGraph(isLight);
    });

    // ========== Interactive Timeline Graph using Canvas ==========

    // Get the canvas element and 2D context
    const graph = document.getElementById("timeline-graph");
    const ctx = graph.getContext("2d");

    // Setup for high DPI screens
    const width = graph.clientWidth;
    const height = graph.clientHeight;
    graph.width = width * devicePixelRatio;
    graph.height = height * devicePixelRatio;
    ctx.scale(devicePixelRatio, devicePixelRatio);

    // Timeline points with relative position (0-1)
    const timelinePoints = [
      { year: "Ancient", label: "Lore", pos: 0.05 },
      { year: "~1230s", label: "Netflix S1", pos: 0.15 },
      { year: "~1240s‚Äì1250s", label: "Books/Show", pos: 0.3 },
      { year: "~1263", label: "Netflix S3", pos: 0.5 },
      { year: "~1264‚Äì1268", label: "Books", pos: 0.65 },
      { year: "~1270", label: "Witcher 1", pos: 0.8 },
      { year: "1271", label: "Witcher 2", pos: 0.9 },
      { year: "1272", label: "Witcher 3", pos: 0.98 },
    ];

    const radius = 12; // radius of timeline dots
    const lineY = height / 2;
    const highlightColorDark = "#f5b041";
    const highlightColorLight = "#d9822b";

    // Variable to track hovered dot index
    let hoverIndex = -1;

    // Draw the timeline graph
    function drawGraph(isLightMode) {
      ctx.clearRect(0, 0, width, height);

      const lineColor = isLightMode ? "#ccc" : "#888";
      const textColor = isLightMode ? "#222" : "#f5f5f5";
      const highlightColor = isLightMode
        ? highlightColorLight
        : highlightColorDark;

      // Draw horizontal timeline base line
      ctx.strokeStyle = lineColor;
      ctx.lineWidth = 4;
      ctx.lineCap = "round";
      ctx.beginPath();
      ctx.moveTo(width * 0.03, lineY);
      ctx.lineTo(width * 0.97, lineY);
      ctx.stroke();

      // Draw each timeline point (circle)
      timelinePoints.forEach(({ pos }, index) => {
        const x = width * pos;
        const y = lineY;

        // Draw circle fill: highlight if hovered
        ctx.fillStyle = index === hoverIndex ? highlightColor : lineColor;
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, Math.PI * 2);
        ctx.fill();

        // Draw circle stroke for non-hovered dots
        if (index !== hoverIndex) {
          ctx.strokeStyle = highlightColor;
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.arc(x, y, radius, 0, Math.PI * 2);
          ctx.stroke();
        }
      });

      // Draw hovered label if any
      if (hoverIndex !== -1) {
        const point = timelinePoints[hoverIndex];
        const x = width * point.pos;
        const label = `${point.year} ‚Äî ${point.label}`;

        ctx.font = "16px 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
        ctx.fillStyle = highlightColor;
        ctx.textAlign = "center";
        ctx.textBaseline = "bottom";

        // Draw label background with padding and rounded corners
        const padding = 8;
        const metrics = ctx.measureText(label);
        const labelWidth = metrics.width + padding * 2;
        const labelHeight = 26;

        // Position label slightly above the circle
        const labelX = x;
        const labelY = lineY - radius - 12;

        ctx.fillRect(
          labelX - labelWidth / 2,
          labelY - labelHeight,
          labelWidth,
          labelHeight,
          10
        );

        // Draw label text
        ctx.fillStyle = isLightMode ? "#fff" : "#000";
        ctx.fillText(label, labelX, labelY - 6);
      }
    }

    // Event handler to detect hover over timeline points
    graph.addEventListener("mousemove", (e) => {
      const rect = graph.getBoundingClientRect();
      const mouseX = (e.clientX - rect.left);
      const mouseY = (e.clientY - rect.top);

      hoverIndex = -1;

      timelinePoints.forEach(({ pos }, index) => {
        const x = width * pos;
        const y = lineY;
        const dx = mouseX - x;
        const dy = mouseY - y;
        if (Math.sqrt(dx * dx + dy * dy) <= radius + 5) {
          hoverIndex = index;
        }
      });

      drawGraph(body.classList.contains("light-mode"));
    });

    // Clear hover when mouse leaves
    graph.addEventListener("mouseleave", () => {
      hoverIndex = -1;
      drawGraph(body.classList.contains("light-mode"));
    });

    // Initial draw of timeline graph on page load
    drawGraph(body.classList.contains("light-mode"));
  </script>
</body>
</html>
